<!DOCTYPE html>
<html>
<head>
  <title>Expense Tracker</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>

</head>
<body>
  <form>
    <div class="container">
    <label for="amount">chooseExpenseAmount:</label>
    <input type="text" id="amount" name="amount">
    <label for="category">Choose discriiption:</label>
    <input type="text" id="category" name="category">
    <label for="cars">Choose a category:</label>
    <select name="cars" id="fun">
      <option value="movie">movie</option>
      <option value="restruant">restruant</option>
      <option value="fun">fun</option>
      <option value="party">party</option>
    </select> 
    <button type="button" id="addExpense" >Add Expense</button>
    </div>
  </form> 
  <br>
  <ul id="expenseList">
  </ul>
  <script>

  document.getElementById("addExpense").addEventListener("click", addExpense);
  function addExpense() {
    // Get user input values
    var amount = document.getElementById("amount").value;
    var category = document.getElementById("category").value;
    var select = document.getElementById("fun").value;
    // Create new list item
    var list = document.getElementById("expenseList");
    var item = document.createElement("li");
    // Add data to item
    item.innerHTML = amount + " - " + category + " (" + select + ")";
    var btn = document.createElement("BUTTON");
    btn.innerHTML = "Delete";
    btn.onclick = function(){
      item.parentNode.removeChild(item);


     var expenses = JSON.parse(localStorage.getItem("expenses"));
var selectedExpense = expenses.find(expense => expense.amount === amount && expense.category === category && expense.select === select);
localStorage.setItem("expenses", JSON.stringify(expenses.filter(expense => expense !== selectedExpense)));
item.parentNode.removeChild(item)
    }

    var editBtn = document.createElement("BUTTON");
editBtn.innerHTML = "Edit";
editBtn.onclick = function(){
  var expenses = JSON.parse(localStorage.getItem("expenses"));
var selectedExpense = expenses.find(expense => expense.amount === amount && expense.category === category && expense.select === select);
localStorage.setItem("expenses", JSON.stringify(expenses.filter(expense => expense !== selectedExpense)));


item.parentNode.removeChild(item);
document.getElementById("amount").value = selectedExpense.amount;
document.getElementById("category").value = selectedExpense.category;
document.getElementById("fun").value = selectedExpense.select;

}
item.appendChild(editBtn);


    item.appendChild(btn);
    list.appendChild(item);
    //store data to local storage
    var expenses = localStorage.getItem("expenses") ? JSON.parse(localStorage.getItem("expenses")) : [];
    expenses.push({amount: amount, category: category, select: select});
    localStorage.setItem("expenses", JSON.stringify(expenses));
    axios.post('https://crudcrud.com/api/f8da698891b2469aadf208cfaf6878de/rajj', { expenses: expenses })
 .then((response)=>console.log(response))
 .catch((err)=>console.log(err));
  
  function deleteExpense() {
    // Get selected item
    var selectedItem = document.getElementsByClassName("selected")[0];
    // Delete selected item
    selectedItem.parentNode.removeChild(selectedItem);
    
  }
}
window.onload = function() {
    var expenses = JSON.parse(localStorage.getItem("expenses"));
    if (expenses) {
        expenses.forEach(function(expense) {
            var list = document.getElementById("expenseList");
            var item = document.createElement("li");
            item.innerHTML = expense.amount + " - " + expense.category + " (" + expense.select + ")";
            list.appendChild(item);
        });
    }
};

  </script>
</body>
</html>